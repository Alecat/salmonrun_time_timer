!function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=n(1),a=o(r),l=n(2),f=o(l),u=n(3),c=o(u),h=new f.default,m=function(){function t(){i(this,t),this.time_offset=new c.default,this.timer=new a.default(this.time_offset),this.elmEta=document.getElementById("eta"),this.elmMode5T=document.getElementById("mode_5T"),this.elmEtaArea=document.getElementById("eta_area"),this.elmEtaLabel=document.getElementById("eta_label"),this.elmOffset=document.getElementById("offset"),this.load_mode5T(),this.elmMode5T.onclick=this.on_change_mode5T.bind(this)}return s(t,[{key:"calc_eta",value:function(){this.list=this.timer.listup_next_STT();var t=this.time_offset.get_time(),e=this.list[0]-t;this.eta=new Date(e)}},{key:"update_eta",value:function(){var t=h.getMinText(this.eta);this.elmEta.innerHTML=t;var e="サーモンランタイム";if(0!=this.time_offset.offset_5T&&(e+="(5T)"),e+="まで",this.elmEtaLabel.innerHTML=e,this.time_offset.offset_jst){var n;n=this.time_offset.offset_jst<0?"-"+h.getMinText(new Date(-this.time_offset.offset_jst)):"+"+h.getMinText(new Date(this.time_offset.offset_jst)),0!=this.time_offset.offset_5T&&(n+=" - 2秒"),this.elmOffset.innerHTML=n+" を補正済"}else this.elmOffset.innerHTML="時刻合わせ中 ..."}},{key:"update_list",value:function(){for(var t in this.list){var e=document.getElementById("stt-item-"+(Number(t)+1)),n=h.getMonthText(this.list[t]);e.innerHTML=n}}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.calc_eta(),this.update_eta(),this.update_list(),t){var e=1e3;this.eta<6e4&&(e=50),setTimeout(this.update.bind(this,!0),e)}}},{key:"load_mode5T",value:function(){var t=localStorage.mode_5T;this.elmMode5T.checked="true"==t||1==t,this.on_change_mode5T()}},{key:"on_change_mode5T",value:function(){var t=this.elmMode5T.checked;this.elmEtaArea.classList.remove("mdl-color--grey-800"),this.elmEtaArea.classList.remove("mdl-color--green-900"),this.elmEtaLabel.classList.remove("mdl-color-text--grey-600"),this.elmEtaLabel.classList.remove("mdl-color-text--yellow-600"),this.elmOffset.classList.remove("mdl-color-text--grey-600"),this.elmOffset.classList.remove("mdl-color-text--yellow-600"),t?(this.time_offset.set_offset_5T(-2e3),this.elmEtaArea.classList.add("mdl-color--green-900"),this.elmEtaLabel.classList.add("mdl-color-text--yellow-600"),this.elmOffset.classList.add("mdl-color-text--yellow-600")):(this.time_offset.set_offset_5T(0),this.elmEtaArea.classList.add("mdl-color--grey-800"),this.elmEtaLabel.classList.add("mdl-color-text--grey-600"),this.elmOffset.classList.add("mdl-color-text--grey-600")),localStorage.mode_5T=t,this.update(!1)}}]),t}();window.onload=function(){(new m).update(!0)}},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;o(this,t),this.time_offset=e}return i(t,[{key:"listup_next_STT",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),n=[];t=this.time_offset?this.time_offset.get_time(e):new Date(e);for(var o=Math.floor((t.getMinutes()-2)/8)+1,i=t.getHours();n.length<7;){for(var s=o+1;s<=7&&n.length<7;++s){var r=2+8*(s-1),a=new Date(t);a.setHours(i),a.setMinutes(r),a.setSeconds(0),a.setMilliseconds(0),n.push(a)}o=0,i+=1}return n}}]),t}();e.default=s},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=function(){function t(){o(this,t)}return i(t,[{key:"getMonthText",value:function(t){var e=t.getMonth()+1,n=t.getDate();e<10&&(e="0"+e),n<10&&(n="0"+n);var o=t.getHours(),i=t.getMinutes(),s=t.getSeconds();return o<10&&(o="0"+o),i<10&&(i="0"+i),s<10&&(s="0"+s),e+"/"+n+" "+o+":"+i+":"+s}},{key:"getMinText",value:function(t){var e=t.getMinutes(),n=t.getSeconds(),o=t.getMilliseconds();return e<10&&(e="0"+e),n<10&&(n="0"+n),o<10?o="00"+o:o<100&&(o="0"+o),e+":"+n+"."+o}}]),t}();e.default=s},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(4),r=function(t){return t&&t.__esModule?t:{default:t}}(s),a=["https://ntp-a1.nict.go.jp/cgi-bin/json","https://ntp-b1.nict.go.jp/cgi-bin/json","https://ntp-a4.nict.go.jp/cgi-bin/json"],l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;o(this,t),this.offset_jst=0,this.set_offset_5T(e),this.get_offset_jst()}return i(t,[{key:"get_time",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),e=0;return this.offset_jst&&(e+=this.offset_jst),this.offset_5T&&(e+=this.offset_5T),new Date(t+e)}},{key:"set_offset_5T",value:function(t){this.offset_5T=t}},{key:"get_offset_jst",value:function(){var t=this;this.results=new Array;var e=Math.floor(3*Math.random()),n=a[e];(0,r.default)(n+"?"+(new Date).getTime()/1e3,function(e,n){if(!e){var o=new Date;n.st&&n.it&&n.leap&&n.next&&n.step&&(n.rt=o.getTime(),n.it=1e3*Number(n.it),n.st=1e3*Number(n.st),n.lb=n.it-16-n.st,n.ub=n.rt+16-n.st,t.offset_jst=-(n.lb+n.ub)/2)}})}}]),t}();e.default=l},function(t,e,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){var e=function(t,e,n){var i;if(XMLHttpRequest)i=new XMLHttpRequest;else if(ActiveXObject)try{i=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{i=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}if(!i)return e.call(this,"Giving up :( Cannot create an XMLHTTP instance",null),!1;i.onreadystatechange=function(){if(4===i.readyState)if(i.status>=200&&i.status<400){var t=i.responseText,o=!(!n||!n.hasOwnProperty("raw"))&&n.raw;if(!o)try{t=JSON.parse(t)}catch(t){return void e.call(this,t,null)}e.call(this,null,t)}else e.call(this,new Error("There was a problem with the request"),null)};var s=n&&n.method?n.method:"GET";if("GET"==s){var r=[];if(n&&n.params&&"object"==o(n.params))for(var a in n.params)r.push(a+"="+encodeURIComponent(n.params[a]));t=r.length>0?t+"?"+r.join("&"):t,i.open("GET",t),i.send()}else if("POST"==s){var l=n&&n.data?n.data:n.params?n.params:{};i.open("POST",t),i.send(JSON.stringify(l))}return i};void 0!==t&&t.exports&&(t.exports=e),"undefined"!=typeof window&&(window.getJSONData=e)}()}]);