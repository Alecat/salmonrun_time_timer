!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(1),a=r(s),u=n(2),f=r(u),l=n(3),c=r(l),h=new f.default,d=function(){function t(){i(this,t),this.time_offset=new c.default,this.timer=new a.default(this.time_offset),document.getElementById("toggle_time_offset_information").addEventListener("click",this.toggle_jst_detail.bind(this))}return o(t,[{key:"calc_eta",value:function(){var t=new Date(Date.now());this.list=this.timer.listup_next_STT();var e=this.list[0]-t;this.time_offset.offset&&(e-=this.time_offset.offset),this.eta=new Date(e)}},{key:"update_eta",value:function(){var t=document.getElementById("eta"),e=h.getMinText(this.eta);t.innerHTML=e;var n=document.getElementById("offset");if(this.time_offset.offset){var r;r=this.time_offset.offset<0?"- "+h.getMinText(new Date(-this.time_offset.offset)):"+ "+h.getMinText(new Date(this.time_offset.offset)),n.innerHTML=r+" を補正済み"}else n.innerHTML="時刻合わせ中 ..."}},{key:"update_list",value:function(){for(var t in this.list){var e=document.getElementById("stt-item-"+(Number(t)+1)),n=h.getMonthText(this.list[t]);e.innerHTML=n}}},{key:"update",value:function(){this.calc_eta(),this.update_eta(),this.update_list();var t=1e3;this.eta<6e4&&(t=50),setTimeout(this.update.bind(this),t)}},{key:"toggle_jst_detail",value:function(){var t=document.getElementById("jst_detail");null!=t&&("block"==t.style.display?t.style.display="none":t.style.display="block")}}]),t}();window.onload=function(){(new d).update()}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e){r(this,t),this.time_offset=e}return i(t,[{key:"listup_next_STT",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),e=[],n=new Date(t-(this.time_offset.offset?0:this.time_offset.offset)),r=Math.floor((n.getMinutes()-2)/8)+1,i=n.getHours();e.length<7;){for(var o=r+1;o<=7&&e.length<7;++o){var s=2+8*(o-1),a=new Date(n);a.setHours(i),a.setMinutes(s),a.setSeconds(0),a.setMilliseconds(0),e.push(a)}r=0,i+=1}return e}}]),t}();e.default=o},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(){r(this,t)}return i(t,[{key:"getMonthText",value:function(t){var e=t.getMonth()+1,n=t.getDate();e<10&&(e="0"+e),n<10&&(n="0"+n);var r=t.getHours(),i=t.getMinutes(),o=t.getSeconds();return r<10&&(r="0"+r),i<10&&(i="0"+i),o<10&&(o="0"+o),e+"/"+n+" "+r+":"+i+":"+o}},{key:"getMinText",value:function(t){var e=t.getMinutes(),n=t.getSeconds(),r=t.getMilliseconds();return e<10&&(e="0"+e),n<10&&(n="0"+n),r<10?r="00"+r:r<100&&(r="0"+r),e+":"+n+"."+r}}]),t}();e.default=o},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(4),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=["https://ntp-a1.nict.go.jp/cgi-bin/json","https://ntp-b1.nict.go.jp/cgi-bin/json","https://ntp-a4.nict.go.jp/cgi-bin/json"],u=function(){function t(){r(this,t),this.error="",this.status=0,this.offset=0,this.get_offset()}return i(t,[{key:"get_offset",value:function(){var t=this;this.results=new Array,this.responsed_count=0;var e=!0,n=!1,r=void 0;try{for(var i,o=a[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var u=i.value;(0,s.default)(u+"?"+(new Date).getTime()/1e3,function(e,n){if(++t.responsed_count,e)return t.error+=String(e)+"\n",void t.errmsg(t.error);var r=new Date;n.st&&n.it&&n.leap&&n.next&&n.step&&(n.rt=r.getTime(),n.it=1e3*Number(n.it),n.st=1e3*Number(n.st),n.leap=Number(n.leap),n.next=Number(n.next),n.step=Number(n.step),n.rtt=n.rt-n.it,n.dif=n.st-(n.it+n.rt)/2,n.lb=n.it-16-n.st,n.ub=n.rt+16-n.st,t.results.unshift(n)),t.responsed_count>=2&&t.calculate()})}}catch(t){n=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"errmsg",value:function(t){var e=document.getElementById("jst_error");e&&(e.innerHTML=t)}},{key:"calculate",value:function(){var t,e,n=this.results;if(0==n.length)return-1;if(n.length>=2)for(var r=1;r<n.length;r++)if(t=Math.max(n[0].lb,n[r].lb),e=Math.min(n[0].ub,n[r].ub),t<e&&e-t<500){this.status=2,this.errmsg("normal");break}2!=this.status&&(t=n[0].lb,e=n[0].ub,this.status=1,this.errmsg("warning")),this.offset=-(t+e)/2,this.leap=n[0].leap,this.next=n[0].next,Math.floor((this.offset+(new Date).getTime())/1e3)>=this.next?this.sl=this.leap+1:this.sl=this.leap;for(var i="",o=n.length-1;o>=0;o--)i+=n[o].id+": RTT = "+Math.round(n[o].rtt)+" ms , (PC Clock - JST) = "+Math.round((n[o].lb+n[o].ub)/2)+" ms<br>";i+="Estimated clock difference (PC Clock - JST) = "+Math.round(-this.offset)+" &plusmn; "+Math.ceil((e-t)/2)+"ms<br>";var s=document.getElementById("jst_status");s&&(s.innerHTML=i)}}]),t}();e.default=u},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){var e=function(t,e,n){var i;if(XMLHttpRequest)i=new XMLHttpRequest;else if(ActiveXObject)try{i=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{i=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}if(!i)return e.call(this,"Giving up :( Cannot create an XMLHTTP instance",null),!1;i.onreadystatechange=function(){if(4===i.readyState)if(i.status>=200&&i.status<400){var t=i.responseText,r=!(!n||!n.hasOwnProperty("raw"))&&n.raw;if(!r)try{t=JSON.parse(t)}catch(t){return void e.call(this,t,null)}e.call(this,null,t)}else e.call(this,new Error("There was a problem with the request"),null)};var o=n&&n.method?n.method:"GET";if("GET"==o){var s=[];if(n&&n.params&&"object"==r(n.params))for(var a in n.params)s.push(a+"="+encodeURIComponent(n.params[a]));t=s.length>0?t+"?"+s.join("&"):t,i.open("GET",t),i.send()}else if("POST"==o){var u=n&&n.data?n.data:n.params?n.params:{};i.open("POST",t),i.send(JSON.stringify(u))}return i};void 0!==t&&t.exports&&(t.exports=e),"undefined"!=typeof window&&(window.getJSONData=e)}()}]);